(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{10:function(e,t,a){e.exports={user:"User_user__3r2O9",user_profile:"User_user_profile__2hgaa",name_user:"User_name_user__2eJGF",user__status:"User_user__status__KTppZ",contacts:"User_contacts__1ar5v",contacts__link:"User_contacts__link__3lunY",avatar:"User_avatar__20Ri-",avatar__img:"User_avatar__img__25jT1",avatar__form:"User_avatar__form__3h7bJ",avatar__input:"User_avatar__input__2i3C_",avatar__label:"User_avatar__label__soMCx",avatar__labelText:"User_avatar__labelText__148d6",setting__button:"User_setting__button__2WbrL",form:"User_form__2EBfZ",checkbox:"User_checkbox__1fExK",inputBox:"User_inputBox__2ieXr"}},130:function(e,t,a){e.exports={container:"App_container__1MQN3",content:"App_content__3La4L"}},133:function(e,t,a){e.exports=a.p+"static/media/preloader.dac52f91.svg"},135:function(e,t,a){e.exports={profile:"Profile_profile__3dzvr"}},136:function(e,t,a){e.exports={posts:"Posts_posts__tkALa"}},139:function(e,t,a){e.exports={wrapper:"Dialogs_wrapper__1cRA8"}},167:function(e,t,a){e.exports=a(297)},20:function(e,t,a){e.exports={inputBox:"FormControls_inputBox__2fyy8",textarea:"FormControls_textarea__1pfDL",input:"FormControls_input__3aAzy",loginError:"FormControls_loginError__2klva",error:"FormControls_error__24y5C"}},23:function(e,t,a){e.exports={menubar:"Menubar_menubar__2YZCy",list:"Menubar_list__324U2",item:"Menubar_item__1xNk5",active:"Menubar_active__2yIgQ"}},24:function(e,t,a){e.exports={users:"Users_users__2Iv27",user:"Users_user__1dQYj",user__img:"Users_user__img__2W4wZ",user__data:"Users_user__data__1plaP",user__name:"Users_user__name__1axGI",user__status:"Users_user__status__8Vfwh",user__friend:"Users_user__friend__1K-Dd",user__friend_true:"Users_user__friend_true__2ee-z",user__button:"Users_user__button__1y0me"}},297:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(68),o=a.n(s),i=a(28),u=a(29),c=a(31),l=a(30),p=a(130),m=a.n(p),f=a(23),d=a.n(f),_=a(14),g=function(){return r.a.createElement("div",{className:d.a.menubar},r.a.createElement("nav",null,r.a.createElement("ul",{className:d.a.list},r.a.createElement("li",{className:d.a.item},r.a.createElement(_.b,{activeClassName:d.a.active,to:"/Profile"},"\u041f\u0440\u043e\u0444\u0438\u043b\u044c")),r.a.createElement("li",{className:d.a.item},r.a.createElement(_.b,{activeClassName:d.a.active,to:"/Dialogs"},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f")),r.a.createElement("li",{className:d.a.item},r.a.createElement("a",{href:"#n"},"\u0424\u043e\u0442\u043e")),r.a.createElement("li",{className:d.a.item},r.a.createElement("a",{href:"#n"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")),r.a.createElement("li",{className:d.a.item},r.a.createElement(_.b,{activeClassName:d.a.active,to:"/Users"},"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u0438")))))},h=a(12),b=a(11),v=a(24),E=a.n(v),O=a(43),A=a.n(O),P=a(41),N=a(48),w=a.n(N),j=function(e){for(var t=e.totalCount,a=e.pageSize,s=e.portionSize,o=void 0===s?10:s,i=e.onPageChanged,u=e.currentPage,c=Math.ceil(t/a),l=[],p=1;p<=c;p++)l.push(p);var m=Object(n.useState)(1),f=Object(P.a)(m,2),d=f[0],_=f[1],g=(d-1)*o+1,h=d*o;return r.a.createElement("div",{className:w.a.paginator__wrapper},d>1&&r.a.createElement("button",{className:w.a.paginator__button,onClick:function(){return _(d-1)}},"\u041d\u0430\u0437\u0430\u0434"),l.filter((function(e){return e>=g&&e<=h})).map((function(e){return r.a.createElement("span",{key:e,onClick:function(t){return i(e)},className:"".concat(u===e?w.a.paginatorActive:""," ").concat(w.a.paginator)},e)})),d<c&&r.a.createElement("button",{className:w.a.paginator__button,onClick:function(){return _(d+1)}},"\u0412\u043f\u0435\u0440\u0435\u0434"))},S=a(93),U=a.n(S),k=a(133),C=a.n(k),M=function(){return r.a.createElement("div",{className:U.a.preloader},r.a.createElement("img",{className:U.a.preloader__img,src:C.a,alt:"preloader"}))},y=function(e){return r.a.createElement("div",null,r.a.createElement(j,{pageSize:e.pageSize,currentPage:e.currentPage,onPageChanged:e.onPageChanged,totalCount:e.totalCount}),e.isFetching?r.a.createElement(M,null):r.a.createElement("ul",{className:E.a.users},e.users.map((function(t){return r.a.createElement("li",{className:E.a.user,key:t.id},r.a.createElement(_.b,{to:"/Profile/".concat(t.id)},r.a.createElement("img",{className:E.a.user__img,src:null!=t.photos.small?t.photos.small:A.a,alt:t.name})),r.a.createElement("div",{className:E.a.user__data},r.a.createElement("div",{className:E.a.user__name},t.name),r.a.createElement("div",{className:E.a.user__status},t.status)),e.isAuth&&e.profileMi.userId!==t.id&&r.a.createElement("div",{className:E.a.user__friend},r.a.createElement("div",{className:E.a.user__friend_true},t.followed?"\u0432\u044b \u0434\u0440\u0443\u0437\u044c\u044f":""),t.followed?r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:E.a.user__button,onClick:function(){e.deleteFromFriends(t.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0434\u0440\u0443\u0437\u0435\u0439"):r.a.createElement("button",{disabled:e.followingInProgress.some((function(e){return e===t.id})),className:E.a.user__button,onClick:function(){e.addToFriend(t.id)}},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0434\u0440\u0443\u0437\u044c\u044f")))}))))},x=a(6),I=a.n(x),T=a(13),D=a(47),F=a(5),R=a(134).create({withCredentials:!0,baseURL:"https://social-network.samuraijs.com/api/1.0/",headers:{"API-KEY":"a19acec0-1037-4064-8297-7df537629abc"}}),L={getUsers:function(e,t){return R.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},postFriend:function(e){return R.post("follow/".concat(e),{}).then((function(e){return e.data}))},deleteFriend:function(e){return R.delete("follow/".concat(e)).then((function(e){return e.data}))}},G=function(e){return R.get("profile/".concat(e)).then((function(e){return e.data}))},B=function(e){return R.get("profile/status/".concat(e)).then((function(e){return e.data}))},z=function(e){return R.put("profile/status",{status:e})},H=function(e){var t=new FormData;return t.append("image",e),R.put("/profile/photo",t,{headers:{"Content-Type":"multipart/form-data"}})},Y=function(e){return R.put("/profile",e)},J=function(){return R.get("auth/me").then((function(e){return e.data}))},Q=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return R.post("auth/login",{email:e,password:t,rememberMe:a,captcha:n}).then((function(e){return e.data}))},q=function(){return R.delete("auth/login").then((function(e){return e.data}))},K=function(){return R.get("security/get-captcha-url").then((function(e){return e.data}))},V=function(e,t,a,n){return e.map((function(e){return e[a]===t?Object(F.a)(Object(F.a)({},e),n):e}))},Z={users:[],totalCount:0,pageSize:10,currentPage:1,isFetching:!1,followingInProgress:[]},W=function(e){return{type:"MAKE-FRIEND",userId:e}},X=function(e){return{type:"NOT-FRIEND",userId:e}},$=function(e){return{type:"SET-CURRENT-PAGE",currentPage:e}},ee=function(e){return{type:"TOGGLE-IS-FETCHING",isFetching:e}},te=function(e,t){return{type:"TOGGLE-IS-FOLLOWING-PROGRESS",followingInProgress:e,userId:t}},ae=function(){var e=Object(T.a)(I.a.mark((function e(t,a,n,r){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(te(!0,a)),e.next=3,n(a);case 3:0===e.sent.resultCode&&(t(r(a)),t(te(!1,a)));case 5:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}(),ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"MAKE-FRIEND":return Object(F.a)(Object(F.a)({},e),{},{users:V(e.users,t.userId,"id",{followed:!0})});case"NOT-FRIEND":return Object(F.a)(Object(F.a)({},e),{},{users:V(e.users,t.userId,"id",{followed:!1})});case"SET-USERS":return Object(F.a)(Object(F.a)({},e),{},{users:t.users});case"SET-CURRENT-PAGE":return Object(F.a)(Object(F.a)({},e),{},{currentPage:t.currentPage});case"SET-TOTAL-COUNT":return Object(F.a)(Object(F.a)({},e),{},{totalCount:t.totalCount});case"TOGGLE-IS-FETCHING":return Object(F.a)(Object(F.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE-IS-FOLLOWING-PROGRESS":return Object(F.a)(Object(F.a)({},e),{},{followingInProgress:t.followingInProgress?[].concat(Object(D.a)(e.followingInProgress),[t.userId]):[e.followingInProgress.filter((function(e){return e!==t.userId}))]});default:return e}},re=function(e){return e.usersPage.users},se=function(e){return e.usersPage.pageSize},oe=function(e){return e.usersPage.totalCount},ie=function(e){return e.usersPage.currentPage},ue=function(e){return e.usersPage.isFetching},ce=function(e){return e.usersPage.followingInProgress},le=function(e){return e.auth.isAuth},pe=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).componentDidMount=function(){var t=e.props,a=t.currentPage,n=t.pageSize;e.props.requestUsers(a,n)},e.onPageChanged=function(t){var a=e.props.pageSize;e.props.requestUsers(t,a)},e}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(y,{users:this.props.users,addToFriend:this.props.addToFriend,deleteFromFriends:this.props.deleteFromFriends,totalCount:this.props.totalCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,followingInProgress:this.props.followingInProgress,isFetching:this.props.isFetching,isAuth:this.props.isAuth,profileMi:this.props.profileMi})}}]),a}(r.a.Component),me=Object(b.b)((function(e){return{users:re(e),pageSize:se(e),totalCount:oe(e),currentPage:ie(e),isFetching:ue(e),followingInProgress:ce(e),isAuth:le(e),profileMi:e.auth.profileMi}}),{addToFriend:function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(te(!0,e)),t.next=3,ae(a,e,L.postFriend.bind(e),W);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},deleteFromFriends:function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(te(!0,e)),t.next=3,ae(a,e,L.deleteFriend.bind(e),X);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},requestUsers:function(e,t){return function(){var a=Object(T.a)(I.a.mark((function a(n){var r;return I.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n(ee(!0)),a.next=3,L.getUsers(e,t);case 3:r=a.sent,n(ee(!1)),n({type:"SET-USERS",users:r.items}),n({type:"SET-TOTAL-COUNT",totalCount:r.totalCount}),n($(e));case 8:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},setCurrentPage:$})(pe),fe=a(135),de=a.n(fe),_e=a(136),ge=a.n(_e),he=a(32),be=a.n(he),ve=function(e){return r.a.createElement("ul",null,e.postsData.map((function(e){return r.a.createElement("li",{key:e.id,className:be.a.item},r.a.createElement("div",{className:be.a.item__post},r.a.createElement("div",{className:be.a.avatar}),r.a.createElement("div",null,"\u0410\u0432\u0442\u043e\u0440: \u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440 \u041a."),r.a.createElement("div",null,e.date)),r.a.createElement("div",{className:be.a.wrapper},r.a.createElement("div",{className:be.a.massege},e.post),r.a.createElement("div",{className:be.a.like},r.a.createElement("button",{className:be.a.btn},r.a.createElement("span",{className:be.a.img}),r.a.createElement("span",null,e.like)))))})))},Ee=a(27),Oe={postsData:[{id:1,login:"admin",post:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e \u043c\u043e\u0439 \u043f\u0435\u0440\u0432\u044b\u0439 \u043f\u043e\u0441\u0442",like:0,date:"21/05/2019 18:00"},{id:2,login:"admin",post:"\u041f\u0440\u0438\u0432\u0435\u0442, \u044d\u0442\u043e \u043c\u043e\u0439 \u0432\u0442\u043e\u0440\u043e\u0439 \u043f\u043e\u0441\u0442",like:0,date:"21/05/2019 18:00"},{id:3,login:"admin",post:"\u0422\u0440\u0435\u0442\u0438\u0439 \u043f\u043e\u0441\u0442",like:20,date:"17/07/2020 22:00"}],profile:null,status:"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441..."},Ae=function(e){return{type:"SET-USER-PROFILE",profile:e}},Pe=function(e){return{type:"SET-USER-STATUS",status:e}},Ne=function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:n=t.sent,a(Ae(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Oe,t=arguments.length>1?arguments[1]:void 0,a=Object(F.a)({},e);switch(t.type){case"ADD-POST":var n=function(){return(new Date).toLocaleString("ru-RU")},r={id:11,login:"admin",post:t.addNewPost,date:n()};return a.postsData=Object(D.a)(e.postsData),a.postsData.push(r),a;case"DELETE-POST":return Object(F.a)(Object(F.a)({},e),{},{postsData:e.postsData.filter((function(e){return e.id!==t.id}))});case"SET-USER-PROFILE":return a.profile=t.profile,a;case"SET-USER-STATUS":return a.status=t.status,a;case"SET-PHOTO-AVATAR":return Object(F.a)(Object(F.a)({},e),{},{profile:Object(F.a)(Object(F.a)({},e.profile),{},{photos:t.photos})});default:return e}},je=a(94),Se=a.n(je),Ue=a(127),ke=a(128),Ce=a(20),Me=a.n(Ce),ye=function(e){var t=e.input,a=e.meta,n=a.touched,s=a.error;return r.a.createElement("div",{className:Me.a.inputBox},r.a.createElement("textarea",Object.assign({className:"".concat(n&&s?Me.a.error:""," ").concat(Me.a.textarea)},t)),n&&s?r.a.createElement("span",{className:Me.a.error},s):void 0)},xe=function(e){var t=e.input,a=e.meta,n=a.touched,s=a.error;return r.a.createElement("div",{className:Me.a.inputBox},r.a.createElement("input",Object.assign({className:"".concat(n&&s?Me.a.error:""," ").concat(Me.a.input)},t)),n&&s?r.a.createElement("span",{className:Me.a.error},s):void 0)},Ie=function(e,t,a,n,s,o,i,u){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue.a,{className:e,component:t,name:a,type:n,validate:s,id:u}))},Te=function(e){return e||"number"===typeof e?void 0:"\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435"},De=function(e){return function(t){return t&&t.length>e?"\u041d\u0435 \u0431\u043e\u043b\u0435\u0435 ".concat(e," \u0441\u0438\u043c\u043e\u043b\u043e\u0432"):void 0}},Fe=De(5),Re=Object(ke.a)({form:"newPost"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:Se.a.post},r.a.createElement("h3",null,"\u041c\u043e\u0439 \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u0441\u0442"),r.a.createElement(Ue.a,{component:ye,name:"addNewPost",validate:[Te,Fe]}),r.a.createElement("button",{className:Se.a.button},"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c"))})),Le=function(e){return r.a.createElement(Re,{onSubmit:function(t){e.addPost(t.addNewPost)}})},Ge=Object(b.b)((function(e){return{postsData:e.profilePage.postsData}}),{addPost:function(e){return{type:"ADD-POST",addNewPost:e}}})((function(e){var t=e.postsData,a=e.addPost;return r.a.createElement("div",{className:ge.a.posts},r.a.createElement(Le,{addPost:a}),r.a.createElement(ve,{postsData:t}))})),Be=a(10),ze=a.n(Be),He=function(e){var t=e.profile,a=(e.isOwner,e.onMainPhotoSelected),n=e.editMode;return r.a.createElement("div",{className:ze.a.avatar},r.a.createElement("img",{className:ze.a.avatar__img,src:null!==t.photos.large?t.photos.large:A.a,alt:t.fullName}),n&&r.a.createElement("form",{className:ze.a.avatar__form},r.a.createElement("input",{className:ze.a.avatar__input,type:"file",id:"avatar__change",onChange:a,multiple:!0}),r.a.createElement("label",{className:ze.a.avatar__label,htmlFor:"avatar__change"},r.a.createElement("span",{className:ze.a.avatar__labelText},"\u0421\u043c\u0435\u043d\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"))))},Ye=a(141),Je=function(e){var t=e.updateUserStatus,a=e.isOwner,s=e.statusUser,o=(Object(Ye.a)(e,["updateUserStatus","isOwner","statusUser"]),Object(n.useState)(!1)),i=Object(P.a)(o,2),u=i[0],c=i[1],l=Object(n.useState)(s),p=Object(P.a)(l,2),m=p[0],f=p[1];Object(n.useEffect)((function(){f(s)}),[s]);return r.a.createElement("div",{className:ze.a.user__status},!u&&(a?r.a.createElement("span",{onDoubleClick:function(){c(!0)}},s||"\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0441\u0442\u0430\u0442\u0443\u0441"):r.a.createElement("span",null,s)),u&&r.a.createElement("input",{onBlur:function(){c(!1),t(m)},className:ze.a.input,autoFocus:!0,onChange:function(e){f(e.currentTarget.value)},value:m}))},Qe=Object(ke.a)({form:"profile"})((function(e){var t=e.handleSubmit,a=e.profile,n=e.error,s=e.deactivateEditMode;return r.a.createElement("form",{onSubmit:t,className:ze.a.form},Ie("",xe,"aboutMe","text",[]),Ie("",xe,"fullName","text",[]),r.a.createElement("div",null,Ie("","input","lookingForAJob","checkbox",[],0,0,"lookingForAJob"),r.a.createElement("label",{className:ze.a.checkbox,htmlFor:"lookingForAJob"},"\u0412 \u043f\u043e\u0438\u0441\u043a\u0435 \u0440\u0430\u0431\u043e\u0442\u044b")),Ie("",ye,"lookingForAJobDescription","text",[]),Object.keys(a.contacts).map((function(e){return r.a.createElement("div",{className:ze.a.inputBox,key:e},r.a.createElement("b",null,e,": "),Ie("style.input",xe,"contacts.".concat(e),"text",[]))})),r.a.createElement("button",null,"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement("button",{onClick:s},"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"),r.a.createElement("div",{className:Me.a.loginError},n))})),qe=function(e){var t=e.profile,a=e.statusUser,n=e.isOwner,s=e.updateUserStatus,o=e.editMode,i=e.setEditMode,u=e.onSubmit;return r.a.createElement("div",{className:ze.a.user_profile},n&&r.a.createElement("button",{className:ze.a.setting__button,onClick:function(){i(!0)}}),r.a.createElement("h3",{className:"".concat(ze.a.user_profile_list," ").concat(ze.a.name_user)},t.fullName),r.a.createElement(Je,{statusUser:a,updateUserStatus:s,isOwner:n}),o?r.a.createElement(Qe,{initialValues:t,onSubmit:u,profile:t,deactivateEditMode:function(){i(!1)}}):r.a.createElement(Ke,{profile:t,isOwner:n,setEditMode:i}))},Ke=function(e){var t=e.profile;return r.a.createElement("div",{className:ze.a.user_profile_list},r.a.createElement("div",null,t.aboutMe?t.aboutMe:""),r.a.createElement("div",null,t.lookingForAJob?t.lookingForAJob:""),r.a.createElement("div",null,t.lookingForAJobDescription?t.lookingForAJobDescription:""),r.a.createElement("div",{className:ze.a.contacts},Object.keys(t.contacts).map((function(e){return t.contacts[e]?r.a.createElement("a",{href:t.contacts[e],key:e,className:ze.a.contacts__link},e):null}))))},Ve=function(e){var t=e.profile,a=e.status,s=e.updateUserStatus,o=e.userMi,i=e.savePhotoAvatar,u=e.saveProfile,c=Object(n.useState)(!1),l=Object(P.a)(c,2),p=l[0],m=l[1];if(!t)return r.a.createElement(M,null);var f=o===t.userId;return r.a.createElement("div",{className:ze.a.user},r.a.createElement(He,{profile:t,onMainPhotoSelected:function(e){e.target.files.length&&i(e.target.files[0])},isOwner:f,editMode:p}),r.a.createElement(qe,{profile:t,isOwner:f,statusUser:a,updateUserStatus:s,editMode:p,setEditMode:m,onSubmit:function(e){u(e).then((function(){m(!1)}))}}))},Ze=function(e){var t=e.profile,a=e.status,n=e.updateUserStatus,s=e.userMi,o=e.savePhotoAvatar,i=e.saveProfile;return r.a.createElement("div",{className:de.a.profile},r.a.createElement(Ve,{profile:t.profile,status:a,updateUserStatus:n,userMi:s,savePhotoAvatar:o,saveProfile:i}),r.a.createElement(Ge,null))},We=function(e){return{isAuth:e.auth.isAuth}},Xe=function(e){var t=function(t){Object(c.a)(n,t);var a=Object(l.a)(n);function n(){return Object(i.a)(this,n),a.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return this.props.isAuth?r.a.createElement(e,this.props):r.a.createElement(h.a,{to:"/login"})}}]),n}(r.a.Component);return Object(b.b)(We)(t)},$e=a(9),et=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"refreshProfile",value:function(){var e=this.props.match.params.UserId;e||(e=this.props.userId),this.props.getProfile(e),this.props.getUserStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.match.params.UserId!==e.match.params.UserId&&this.refreshProfile()}},{key:"render",value:function(){var e=this.props,t=e.profile,a=e.isAuth,n=e.status,s=e.updateUserStatus,o=e.userId,i=e.savePhotoAvatar,u=e.saveProfile;return r.a.createElement(Ze,{profile:t,isAuth:a,status:n,updateUserStatus:s,userMi:o,savePhotoAvatar:i,saveProfile:u})}}]),a}(r.a.Component),tt=Object($e.d)(h.f,Xe,Object(b.b)((function(e){return{profile:e.profilePage,status:e.profilePage.status,userId:e.auth.id}}),{setUserProfile:Ae,getProfile:Ne,getUserStatus:function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(e);case 2:n=t.sent,a(Pe(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},updateUserStatus:function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a){return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,z(e);case 2:0===t.sent.data.resultCode&&a(Pe(e));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},savePhotoAvatar:function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,H(e);case 2:0===(n=t.sent).data.resultCode&&a({type:"SET-PHOTO-AVATAR",photos:n.data.data.photos});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},saveProfile:function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a,n){var r,s;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n().auth.id,t.next=3,Y(e);case 3:if(0!==(s=t.sent).data.resultCode){t.next=8;break}a(Ne(r)),t.next=10;break;case 8:return a(Object(Ee.a)("profile",{_error:s.data.messages[0]})),t.abrupt("return",Promise.reject(s.data.messages[0]));case 10:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()}}))(et),at=a(37),nt=a.n(at),rt=function(e){var t=e.isAuth,a=e.logout,n=e.profileMi;return r.a.createElement("div",null,t?n?r.a.createElement("div",{className:nt.a.login},r.a.createElement("img",{className:nt.a.avatar,src:null!==n.photos.large?n.photos.large:A.a,alt:n.fullName}),r.a.createElement("div",null,n.fullName),r.a.createElement("button",{onClick:a,className:nt.a.auth__button},"\u0412\u044b\u0439\u0442\u0438")):r.a.createElement(M,null):r.a.createElement(_.b,{className:nt.a.auth__button,to:"/login"},"\u0412\u043e\u0439\u0442\u0438"))},st=function(e){var t=e.isAuth,a=e.logout,n=e.profileMi;return r.a.createElement("header",{className:nt.a.header},r.a.createElement("div",{className:nt.a.auth},r.a.createElement(rt,{isAuth:t,logout:a,profileMi:n})))},ot={id:null,login:null,email:null,isAuth:!1,profileMi:null,captcha:null},it=function(e,t,a,n,r){return{type:"auth/SET-USER-DATA",payload:{id:e,login:t,email:a,isAuth:n,captcha:r}}},ut=function(e){return{type:"auth/SET-AUTH-PROFILE-MI",profileMi:e}},ct=function(e){return function(){var t=Object(T.a)(I.a.mark((function t(a){var n;return I.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,G(e);case 2:n=t.sent,a(ut(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},lt=function(){return function(){var e=Object(T.a)(I.a.mark((function e(t){var a,n,r,s,o;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,J();case 2:0===(a=e.sent).resultCode&&(n=a.data,r=n.id,s=n.login,o=n.email,t(it(r,s,o,!0)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},pt=function(){return function(){var e=Object(T.a)(I.a.mark((function e(t){var a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K();case 2:a=e.sent,t({type:"auth/SET-CAPTCHA-URL",url:a.url});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/SET-USER-DATA":return Object(F.a)(Object(F.a)({},e),{},{id:t.payload.id,login:t.payload.login,email:t.payload.email,isAuth:t.payload.isAuth,captcha:t.payload.captcha});case"auth/SET-AUTH-PROFILE-MI":return Object(F.a)(Object(F.a)({},e),{},{profileMi:t.profileMi});case"auth/SET-CAPTCHA-URL":return Object(F.a)(Object(F.a)({},e),{},{captcha:t.url});default:return e}},ft=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"refreshProfileMi",value:function(){var e=this.props.userId;this.props.getAuthProfileMi(e)}},{key:"componentDidMount",value:function(){this.refreshProfileMi()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.userId!==e.userId&&this.refreshProfileMi()}},{key:"render",value:function(){return r.a.createElement(st,{isAuth:this.props.isAuth,profileMi:this.props.profileMi,logout:this.props.logout,setAuthUserData:it,getAuthProfileMi:ct})}}]),a}(r.a.Component),dt=Object(b.b)((function(e){return{isAuth:e.auth.isAuth,userId:e.auth.id,profileMi:e.auth.profileMi}}),{setAuthUserData:it,logout:function(){return function(){var e=Object(T.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q();case 2:0===e.sent.resultCode&&(t(it(null,null,null,!1,null)),t(ut(null)));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getAuthProfileMi:ct})(ft),_t=a(49),gt=a.n(_t),ht=De(20),bt=Object(ke.a)({form:"login"})((function(e){var t=e.handleSubmit,a=e.error,n=e.captcha;return r.a.createElement("form",{onSubmit:t,className:gt.a.wrapper},r.a.createElement("div",{className:Me.a.loginError},a),Ie(null,xe,"email",null,[Te,ht]),Ie(null,xe,"password","password",[Te,ht]),Ie("".concat(gt.a.rememberMi),"input","rememberMi","checkbox",null),r.a.createElement("button",{className:gt.a.button},"\u0412\u043e\u0439\u0442\u0438"),n&&r.a.createElement("div",null,r.a.createElement("img",{src:n,alt:"captcha"}),Ie(null,xe,"captcha","text",[Te])))})),vt=Object(b.b)((function(e){return{isAuth:e.auth.isAuth,captcha:e.auth.captcha}}),{login:function(e,t,a,n){return function(){var r=Object(T.a)(I.a.mark((function r(s){var o,i;return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Q(e,t,a,n);case 2:0===(o=r.sent).resultCode&&s(lt()),10===o.resultCode?s(pt()):(i=o.messages.length>0?o.messages[0]:null,s(Object(Ee.a)("login",{_error:i})));case 5:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}})((function(e){var t=e.login,a=e.isAuth,n=e.captcha;return a?r.a.createElement(h.a,{to:"/Profile/"}):r.a.createElement("div",{className:gt.a.form},r.a.createElement("h3",{className:gt.a.form__header},"\u0412\u0445\u043e\u0434"),r.a.createElement(bt,{onSubmit:function(e){t(e.email,e.password,e.rememberMi,e.captcha)},captcha:n}))})),Et=a(139),Ot=a.n(Et),At=a(50),Pt=a.n(At),Nt=De(5),wt=Object(ke.a)({form:"messages"})((function(e){return r.a.createElement("form",{onSubmit:e.handleSubmit,className:Pt.a.wrapper},r.a.createElement(Ue.a,{rows:"1",component:ye,name:"newMessage",validate:[Te,Nt]}),r.a.createElement("button",{className:Pt.a.button}))})),jt=function(e){var t={justifySelf:"end",backgroundColor:"#ccf2b0"};return r.a.createElement("ul",{className:Pt.a.massages},e.messagesData.map((function(e){return"admin"===e.login?r.a.createElement("li",{style:t,className:Pt.a.massage,key:e.id},e.message):r.a.createElement("li",{className:Pt.a.massage,key:e.id},e.message)})),r.a.createElement(wt,{onSubmit:function(t){e.addMessage(t.newMessage)}}))},St=a(73),Ut=a.n(St),kt=function(e){return r.a.createElement("ul",{className:Ut.a.dialogs},e.dialogsData.map((function(e){return r.a.createElement(_.b,{key:e.id,className:Ut.a.dialog,activeClassName:Ut.a.active,to:"/Dialogs/".concat(e.login)},e.name)})))},Ct={dialogsData:[{id:1,login:"kris",name:"\u041a\u0440\u0438\u0441\u0442\u0438\u043d\u0430"},{id:2,login:"kirill",name:"\u041a\u0438\u0440\u0438\u043b\u043b"},{id:3,login:"nata",name:"\u041d\u0430\u0442\u0430\u043b\u044c\u044f"},{id:4,login:"uliya",name:"\u042e\u043b\u0438\u044f"},{id:5,login:"matvey",name:"\u041c\u0430\u0442\u0432\u0435\u0439"},{id:6,login:"sony",name:"\u0421\u043e\u0444\u0438\u044f"}],messagesData:[{id:1,login:"kris",message:"\u041f\u0440\u0438\u0432\u0435\u0442!"},{id:2,login:"admin",message:"\u041a\u0430\u043a \u0434\u0435\u043b\u0430!"},{id:3,login:"kris",message:"\u0412\u0441\u0435 \u043d\u043e\u0440\u043c\u0430\u043b\u044c\u043d\u043e!"},{id:4,login:"admin",message:"\u0418\u0437\u0443\u0447\u0430\u044e \u0440\u0435\u0430\u043a\u0442 \u043d\u0430 IT-Kamasutra."}]},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0,a=Object(F.a)({},e);switch(t.type){case"ADD-MESSAGE":var n={id:10,login:"admin",message:t.newMessage};return a.messagesData=Object(D.a)(e.messagesData),a.messagesData.push(n),a;default:return e}},yt=Object($e.d)(Object(b.b)((function(e){return{dialogsData:e.messagesPage.dialogsData,messagesData:e.messagesPage.messagesData}}),{addMessage:function(e){return{type:"ADD-MESSAGE",newMessage:e}}}),Xe)((function(e){var t=e.dialogsData,a=e.messagesData,n=e.addMessage,s=e.isAuth;return r.a.createElement("div",{className:Ot.a.wrapper},r.a.createElement(kt,{dialogsData:t}),r.a.createElement(jt,{messagesData:a,addMessage:n,isAuth:s}))})),xt={initial:!1},It=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:xt,t=arguments.length>1?arguments[1]:void 0,a=Object(F.a)({},e);switch(t.type){case"INITIALIZATION-SUCCESS":return a.initial=!0,a;default:return e}},Tt=function(e){Object(c.a)(a,e);var t=Object(l.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){this.props.initializeApp()}},{key:"render",value:function(){return this.props.initial?r.a.createElement("div",{className:m.a.container},r.a.createElement(dt,null),r.a.createElement(g,null),r.a.createElement("div",{className:"content"},r.a.createElement(h.b,{path:"/Profile/:UserId?",render:function(){return r.a.createElement(tt,null)}}),r.a.createElement(h.b,{path:"/Dialogs",render:function(){return r.a.createElement(yt,null)}}),r.a.createElement(h.b,{path:"/Users",render:function(){return r.a.createElement(me,null)}}),r.a.createElement(h.b,{path:"/Login",render:function(){return r.a.createElement(vt,null)}}))):r.a.createElement(M,null)}}]),a}(r.a.Component),Dt=Object($e.d)(Object(b.b)((function(e){return{initial:e.app.initial}}),{initializeApp:function(){return function(e){e(lt()).then((function(){e({type:"INITIALIZATION-SUCCESS"})}))}}}),h.f)(Tt),Ft=a(140),Rt=a(129),Lt=Object($e.c)({messagesPage:Mt,profilePage:we,usersPage:ne,auth:mt,form:Rt.a,app:It}),Gt=Object($e.e)(Lt,Object($e.a)(Ft.a));window.store=Gt;var Bt=Gt;o.a.render(r.a.createElement(_.a,null,r.a.createElement(b.a,{store:Bt},r.a.createElement(Dt,null))),document.getElementById("root"))},32:function(e,t,a){e.exports={wrapper:"Post_wrapper__3p27Q",item:"Post_item__2EmvQ",avatar:"Post_avatar__3qkL-",massage:"Post_massage__3KLy-",like:"Post_like__lxvJu",btn:"Post_btn__1tKp9",img:"Post_img__3Rtvr",item__post:"Post_item__post__30FLr"}},37:function(e,t,a){e.exports={header:"Header_header__1VCKf",auth:"Header_auth__22ubL",auth__button:"Header_auth__button__1W4YI",login:"Header_login__3V3Qa",avatar:"Header_avatar__2DnQ9"}},43:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAABuwAAAbsBOuzj4gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAQhSURBVHic7dvPq1VVFAfwz9YyFUHJQDMrs19YYESZ/SRCU6SIKBo3y4j6CxpEDYIGzaqBwwgnDZoYJVEQ1MB+SWaKYtIPS6OyNEr74VsNzn0lr3veve+ede59T/zCmtxz+O61vmftffZe69wSEYaBUspK3Iv1uARLsBg/43t8i3ewLSL2DsUpiIhWDevwAWIKthv3t+1bRLQnQOcpb59i4BPtfayacQLgVhxpGPy4HcOmGSMAHsTJpODH7RQemfYCYA1+Tw5+3P7GxmwBSsfxxiilLMOHWJZC2B3HsDYi9mURzsoiwvPaDR4W4qVUxsTUH9NO6nezDVlTICsDnkFJ4up3vBQ0XgNKKYvwA85J8ah/rIiIr5qSZGTARsMPHu7LIMkQ4K4EjkGwLoMkQ4CLEjhGNm6GAEsSOEY2boYACxM4RjZuhgA/JXCMbNwMAY4kcIxs3AwBGr+LRzluhgBvJXAMgjczSDJ2gvNU83FehkN9YgxLIuLHpkSNMyAiTuC1pjxTxPaM4EnIAP6t+O7FnMZkvRG4ISJ2ZpClnAYj4iBeyODqA1uzgicpA6CUMh/v4foUwu44iJsiIm3vkSYAlFKWq8piS9NI/8Nx3BIRezJJM0tiIuIQ7sHhTF78omqUpAaP1voCy/GxnPLXflzdhp+RXRafIMJ8PIcTAwb+l6oAuqgtH1sVYEI2bMHRPgP/Fa/gyrZ9i0jsC0Ap5byI+KPm2mzchrtxqaqgcYFqF3kYX6u6w+9GxJ+TjDE3Ik6m+TyoAJ3Nzzpc17HVmK16ei9GxGdZTnbGW4sn8JAqSz7t2C7VznCwhXeAlJ6Dp/Tu/23BwoQptBSv9hjrOB7HrFbXAFUK7+nhzOl2qPPEpu5YJfRm/a8dgR1Y3YoA2KDq0g6yoh9Qpe+CPsZZjCfx3YBjncSNqYtgKeVi7Ow41wTH8JHq4DRu52LVabZG86P1l6oD09Ged/aZijvk9fWGZa/rLPKNpgCengbBDGqPNpoCnRPeNzi/9qbpjQOqbfRY3Q29DkMPm7nBwxWqw1k9Jkn9ojqIjDqNm9rbA60BuHkaOJ9lF9bFOdkUuGOSazMNd9ZdOCtAtx9LKQW3t+bO8FErQNfXYCnlctUr5EzCgoj4beKPdVPgspadGQW6xlQnwMoWHRkVusZ0NgNqbm77i89RoGtMdQIMs9M7LHSN6awANTfPbdGRUaFrTHUC9K6kzDx0jalOgN0tOjIq7Or241kBam4+0wQYUxNTnQBfqP7MeKbgk6i+ZfofugrQqaFtbtWl4eEUHqu92qMi/LLRV3Oa2rMDl8WxSNXeGnUQg9puzGnaF1iBbdMgmKnaVtXHlGm9wQdmSDbsx/p+45rS9wGllAXYhGs6di2uUvX3RoET2KfqWO/B53gjaj7S6IZ/AMZxYb/yHSwRAAAAAElFTkSuQmCC"},48:function(e,t,a){e.exports={paginator:"Paginator_paginator__18P4_",paginator__wrapper:"Paginator_paginator__wrapper__12U1W",paginatorActive:"Paginator_paginatorActive__2vBj1",paginator__button:"Paginator_paginator__button__1P-oQ"}},49:function(e,t,a){e.exports={form:"login_form__1XT1R",form__header:"login_form__header__1vdW1",wrapper:"login_wrapper__1C9Og",button:"login_button__FtnWQ",rememberMi:"login_rememberMi__244Yq"}},50:function(e,t,a){e.exports={massages:"Messages_massages__l7SJP",wrapper:"Messages_wrapper__3OJOv",button:"Messages_button__CHhT0",massage:"Messages_massage__wD3mv",admin:"Messages_admin__2I7Ut"}},73:function(e,t,a){e.exports={dialogs:"Dialog_dialogs__2Ped7",dialog:"Dialog_dialog__1323i",active:"Dialog_active__2fc4o"}},93:function(e,t,a){e.exports={preloader:"Preloader_preloader__2dvkO",preloader__img:"Preloader_preloader__img__6k2KM"}},94:function(e,t,a){e.exports={post:"NewPost_post__1nV8v",button:"NewPost_button__37Esr"}}},[[167,1,2]]]);
//# sourceMappingURL=main.55a41909.chunk.js.map